<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Basic Axes</title>
</head>

<style> /* set the CSS */

body { font: 12px Arial;}

path {
    stroke: black;
    stroke-width: 2;
    fill: none;
}

.result {
    stroke: red;
}

.axis path,
.axis line {
    fill: none;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

.deposit {
    fill: green;
    stroke-width:0
}

.debit {
    fill: red;
    stroke-width:0
}

</style>

<body>

<svg width="900" height="2000"></svg>

<script src="http://d3js.org/d3.v4.min.js"></script>

<script type="text/javascript">

    var deposits = [
        {"date": new Date(2018, 1, 1), "value": 30},
        {"date": new Date(2018, 1, 5), "value": 30},
        {"date": new Date(2018, 1, 10), "value": 30},
        {"date": new Date(2018, 1, 15), "value": 30},
        {"date": new Date(2018, 2, 1), "value": 120},
        {"date": new Date(2018, 2, 10), "value": 120},
        {"date": new Date(2018, 2, 15), "value": 120}
    ]

    var debits = [
        {"date": new Date(2018, 1, 20), "value": 150}
    ]

    var balances = [
        {"date": new Date(2018, 0, 0), "value": 0},
        {"date": new Date(2018, 1, 1), "value": 0},
        {"date": new Date(2018, 1, 1), "value": 30},
        {"date": new Date(2018, 1, 5), "value": 30},
        {"date": new Date(2018, 1, 5), "value": 60},
        {"date": new Date(2018, 1, 10), "value": 60},
        {"date": new Date(2018, 1, 10), "value": 90},
        {"date": new Date(2018, 1, 15), "value": 90},
        {"date": new Date(2018, 1, 15), "value": 120},
        {"date": new Date(2018, 1, 20), "value": 120},
        {"date": new Date(2018, 1, 20), "value": -30},
        {"date": new Date(2018, 2, 1), "value": -30},
        {"date": new Date(2018, 2, 1), "value": 90},
        {"date": new Date(2018, 2, 10), "value": 90},
        {"date": new Date(2018, 2, 10), "value": 210},
        {"date": new Date(2018, 2, 15), "value": 210},
        {"date": new Date(2018, 2, 15), "value": 330},
        {"date": new Date(2018, 3, 1), "value": 330}
    ]

    var svg = d3.select("svg")
        .attr("class", "axis");

    var width = +svg.attr("width");
    var height = +svg.attr("height");

    var margin = 25;
    var axisHeight = height - 2 * margin;

    var scale = d3.scaleTime()
        .domain([new Date(2018, 0, 1), new Date(2018, 3, 1)])
        .range([0, axisHeight])

    var axis = d3.axisRight()
        .scale(scale)
        .ticks(10);

    svg.append("g")
        .attr("transform", "translate(" + width / 2 + ", " + margin + ")")
        .call(axis);

    svg.selectAll(".bar")
        .data(deposits)
        .enter()
        .append("rect")
        .attr("class", "deposit")
        .attr("x", 0)
        .attr("width", function(d) { return d.value; })
        .attr("y", function(d) { return scale(d.date); })
        .attr("height", 10)
        .attr("transform", "translate(" + width / 2 + ", " + margin + ")")

    svg.selectAll(".bar")
        .data(debits)
        .enter()
        .append("rect")
        .attr("class", "debit")
        .attr("x", function(d) { return -d.value; })
        .attr("width", function(d) { return d.value; })
        .attr("y", function(d) { return scale(d.date); })
        .attr("height", 10)
        .attr("transform", "translate(" + width / 2 + ", " + margin + ")");

    var line = d3.line()
        .x(function(d) { return d.value; })
        .y(function(d) { return scale(d.date); });

    svg.append("path")
        .attr("class", "result")
        .style("stroke-dasharray", ("3, 3"))
        .attr("d", line(balances))
        .attr("transform", "translate(" + width / 2 + ", " + margin + ")");

</script>

</body>

</html>
